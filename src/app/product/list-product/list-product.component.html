<body>
    <div class="container-xl" *ngIf="!loading">
        <div class="table-responsive">
            <div class="table-wrapper">
                <div class="table-title">
                    <div class="row">
                        <div class="col-sm-6">
                            <h2>ALL <b>Products</b></h2>
                        </div>
                        <div class="col-sm-6">
                            <a routerLink="/createProduct" class="btn btn-success" data-toggle="modal"><i
                                    class="material-icons">&#xE147;</i> <span>Add New Product</span></a>

                        </div>
                    </div>
                </div>

                <!-- pagination -->
                <div class="hint-text"> Showing
                    <select (change)="onTableSizeChange($event)">
                        <option *ngFor="let size of tableSizes">
                            {{size}}
                        </option>
                    </select>

                    <!-- search -->
                    <input type="text" [(ngModel)]="searchText" placeholder="Search">
                    <!-- end search -->
                    
                </div>
                <!-- end pagination -->




                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>NÂ°</th>
                            <th>Photo</th>
                            <th>Name</th>
                            <th>Price</th>
                            <th>Description</th>
                            <th>Tax</th>
                            <th>In Stock</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let product of productsDto  | paginate:{
                            itemsPerPage: tableSize,
                            currentPage:page, totalItems: count}| search: searchText ;let i=index">
                            <td> {{i+1}} </td>
                            <td>
                                <img class="image-upload" [src]="product.photo" style="max-height: 30px"
                                    alt="product image">
                            </td>
                            <td>{{product.name}}</td>
                            <td>{{product.price}}</td>
                            <td>{{product.description}}</td>
                            <td>{{product.tax}}</td>
                            <td>{{product.inStock}}</td>

                            <td>
                                <a [routerLink]="['/editProduct', product.id]" class="edit" data-toggle="modal"><i
                                        class="material-icons" data-toggle="tooltip" title="Edit">&#xE254;</i></a>
                                <a href="#" class="delete" data-toggle="modal" (click)="openDeleteModal(product.id)"><i
                                        class="material-icons" data-toggle="tooltip" title="Delete">&#xE872;</i></a>
                            </td>
                        </tr>

                    </tbody>
                </table>

                <!-- Pagination -->
                <div>
                    <pagination-controls class="pagination" previousLabel="Previous" nextLabel="Next"
                        (pageChange)="onTableDataChange($event)">

                    </pagination-controls>
                </div>
                <!-- end Pagination -->



            </div>



        </div>




    </div>


    <div class=" container-xl text-center w-200" *ngIf="loading">
        <app-spinner></app-spinner>
    </div>




</body>


<!-- Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Warning!</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Are you sure to delete the item?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-danger" (click)="delete()">Confirm Delete</button>
            </div>
        </div>
    </div>
</div>