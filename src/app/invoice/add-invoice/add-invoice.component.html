<div class="container">

  <h1>{{TitlePage}}</h1>
  <form class="container" [formGroup]="invoiceForm" (ngSubmit)="addInvoice()">
    <div class="row">
      <div class="form-group">

        <label>invoice code</label>
        <span>*</span>
        <input formControlName="code" class="form-control" /> <br>
    
    
        <div  formGroupName="client">
          <label>customer</label>
          <span>*</span>
          <select  formControlName="id" (change)="clientChange()" class="form-control">
            <option value="" disabled selected>Select a customer...</option>
            <option *ngFor="let item of invClient" [ngValue]="item.id">{{item.name}} </option>
          </select> <br>
        </div>
      
       
        <label>Remarks</label>
        <textarea type="text" formControlName="remarks" class="form-control"></textarea> <br>


        <label>Date</label>
        <span>*</span>
        <input type="datetime" formControlName="date" class="form-control" /> <br>

      
        <label>Discount</label>
        <input type="number" formControlName="discount" class="form-control" /> <br>

        <label>Tax</label>
        <input type="number" formControlName="tax" class="form-control" /> <br>


        <label>Status</label>
        <select formControlName="status" class="form-control">
          <option *ngFor="let item of invStatus" [value]="item">{{item}} </option>
        </select> <br>




      </div>
    </div>



    <div class="row">
      <table class="table table-bordered" formArrayName="sales">
        <thead thead class="table-dark text-white">
          <tr>
            <td>Sale N</td>
            <td>Product</td>
            <td>Unit Price </td>
            <td>Quantity</td>
            <td>Available</td>
            <td>Tax</td> 
            <td>Discount</td>
            <td>Sale Amount</td>
            <td>Action </td>
          </tr>
        </thead>
        <tbody *ngFor="let item of invsales.controls;let i=index" [formGroupName]="i">
          <td> {{i+1}}</td>

          <td formGroupName="product">
            <select style ="width:10rem" formControlName="id" (change)="productChange(i)" class="form-control">
              <option value="" disabled selected>Select a product...</option>
              <option *ngFor="let item of invProducts" [value]="item.id">{{item.name}} </option>
            </select>
          </td>

          <td>
            <input class="form-control" (change)="ItemCalculation(i)" formControlName="unitPrice" />
          </td>
          <td>
            <input class="form-control" (change)="ItemCalculation(i)" formControlName="quantity" />
          </td>
          <td>
            <input class="form-control" formControlName="available" />
          </td>

          <td>
            <input class="form-control" formControlName="tax" />
          </td>
     
          <td>
            <input class="form-control" formControlName="discount" />
          </td>
         
          <td>
            <input class="form-control" formControlName="price" />
          </td>



          <td>
            <button type="button" class="btn btn-dark" style="background-color: #212529;"> delete </button>
          </td>

        </tbody>
        <tfoot>
          <td colspan="8">
            <button (click)="addSale()" type="button" class="btn btn-dark" style="background-color: #212529;"> [+]
            </button>

          </td>

        </tfoot>
      </table>

    </div>

    
    <div class="flex row">


      <div class= " flex-start col-sm-6">
        <button type="submit" class="btn btn-dark" style="background-color: #761b86;"> create</button> 
      </div>
     
     
     <div  class= " flex-end col-sm-6" >
     
      <label>Total</label>
      <input formControlName="total" class="form-control" />

     </div>
     
    </div>






  </form>


</div>